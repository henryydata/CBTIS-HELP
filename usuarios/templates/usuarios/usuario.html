{% extends "base.html" %}
{% block title %}{{ usuario.username }} | Perfil{% endblock %}
{% block content %}
{% load static %}
<div class="content py-10">
    {% if usuario %}
    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-xl border border-[#56070c]/20 overflow-hidden">
        <div class="relative h-40 bg-[#56070c]">
            {% if profile.banner %}
                <img src="{{ profile.banner.url }}" alt="{{ profile.banner.url }}" class="w-full h-full object-cover">
            {% endif %}
            <div class="absolute -bottom-12 left-6 flex items-center">
                {% if profile.foto %}
                    <img src="{{ profile.foto.url }}" alt="{{ profile.foto.url }}" class="w-28 h-28 rounded-full border-4 border-white shadow-lg object-cover">
                {% else %}
                    <div class="w-28 h-28 rounded-full bg-white/20 backdrop-blur-md border-4 border-white shadow-lg flex items-center justify-center text-3xl font-bold text-white">
                        {{ usuario.username|slice:":1"|upper }}
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="px-6 pt-16 pb-6">
            <h2 class="text-3xl font-bold text-[#56070c] tracking-wide">{{ usuario.username }}</h2>
            {% if profile.biografia %}
            <p class="text-gray-600 mt-2 text-sm">
                {{ profile.biografia }}
            </p>
            {% endif %}
            <div class="mt-4 grid grid-cols-1 gap-3">
                {% for alu in alumno %}
                <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                    <p><span class="font-semibold text-[#56070c]">Nombre:</span> {{ alu.nombre }}</p>
                    <p><span class="font-semibold text-[#56070c]">Apellidos:</span> {{ alu.apellido_paterno }} {{ alu.apellido_materno }}</p>
                    <p><span class="font-semibold text-[#56070c]">Especialidad:</span> {{ alu.especialidad }}</p>
                    <p><span class="font-semibold text-[#56070c]">Comunidad:</span> {{ alu.comunidad }}</p>
                    <p><span class="font-semibold text-[#56070c]">Escuela:</span> {{ alu.escuela }}</p>
                </div>
                {% endfor %}
            </div>
            {% if profile.telefono %}
            <div class="mt-3">
                <span class="font-semibold text-[#56070c]">Tel√©fono:</span>
                <p>{{ profile.telefono }}</p>
            </div>
            {% endif %}
        </div>
        {% if is_owner %}
        <div class="bg-gray-50 border-t border-[#56070c]/10 px-6 py-4 flex justify-between">
            <a href="{% url 'editar_perfil' %}"
                class="px-4 py-2 text-sm font-medium bg-white border border-[#56070c] text-[#56070c] rounded-xl hover:bg-[#56070c] hover:text-white transition">
                Editar perfil
            </a>
            {% if is_teacher %}
            <a href="{% url 'dashboard_maestro' %}"
                class="px-4 py-2 text-sm font-medium text-white bg-[#56070c] rounded-xl hover:bg-[#6f0b10] transition">
                Dashboard maestro
            </a>
            {% endif %}
            {% if is_student %}
            <a href="{% url 'dashboard_alumno' %}"
                class="px-4 py-2 text-sm font-medium text-white bg-[#56070c] rounded-xl hover:bg-[#6f0b10] transition">
                Dashboard alumno
            </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
    {% else %}
    <p class="text-center text-gray-500 mt-8">Usuario no encontrado.</p>
    {% endif %}
</div>
{% endblock %}
