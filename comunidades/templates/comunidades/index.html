{% extends "base.html" %}
{% load static %}
{% block title %}{{ titulo }}{% endblock %}
{% block content %}

<div class="container my-5">
  <h1 class="text-center mb-5 fw-bold" style="color:#56070c;">Comunidades</h1>

  <div class="row g-4">
    {% for comunidad in comunidades %}
    <div class="col-md-4 col-sm-6">
      <div class="card shadow-sm border-0 h-100 rounded-4 overflow-hidden hover-card">
        {% if comunidad.imagen %}
          <img src="{{ comunidad.imagen.url }}" class="card-img-top" alt="{{ comunidad.comunidad }}" style="height: 200px; object-fit: cover;">
        {% else %}
          <img src="{% static 'img/default_community.jpg' %}" class="card-img-top" alt="Comunidad" style="height: 200px; object-fit: cover;">
        {% endif %}

        <div class="card-body text-center d-flex flex-column justify-content-between">
          <div>
            <h5 class="card-title fw-bold text-[#56070c] mb-2">{{ comunidad.comunidad }}</h5>
            <p class="small mb-1" style="color:#7a0f14;">
              Categoría: <span class="fw-semibold text-[#a81b1b]">{{ comunidad.categoria }}</span>
            </p>
            <p class="card-text text-secondary" style="font-size: 0.9rem; min-height: 50px;">
              {{ comunidad.descripcion|truncatechars:100 }}
            </p>
          </div>

          <div class="mt-3">
            <a href="{% url 'ver_comunidad' comunidad.slug %}" class="btn btn-vino btn-sm rounded-pill px-4">
              Ver comunidad
            </a>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12 text-center">
      <p class="text-muted">No hay comunidades disponibles aún.</p>
    </div>
    {% endfor %}
  </div>
</div>

<style>
  body {
    background-color: #fdf8f8;
  }

  .card {
    background-color: #fff;
    border: 1px solid #f3d9d9;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .hover-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 25px rgba(86, 7, 12, 0.25);
  }

  .btn-vino {
    background-color: #56070c;
    color: #fff;
    border: 1px solid #56070c;
    transition: all 0.3s ease;
  }

  .btn-vino:hover {
    background-color: #7a0f14;
    border-color: #7a0f14;
    color: #fff;
    transform: translateY(-2px);
  }

  h1 {
    letter-spacing: 1px;
  }
</style>

{% endblock %}
