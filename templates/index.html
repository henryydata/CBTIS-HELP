{% extends "base.html" %}
{% block title %}Inicio{% endblock %}
{% block content %}
    <div id="carouselExampleFade" class="carousel slide carousel-fade">
    <div class="carousel-inner">
        <div class="carousel-item active">
        {% load static %}
        <img src="{% static 'banner.png' %}" class="d-block w-100" alt="...">
        </div>
        <div class="carousel-item">
        <img src="{% static 'bannerhelp.png ' %}" class="d-block w-100" alt="...">
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
    </div>
    <div>
    <h2 class="flex items-center justify-center">Bienvenido a la página principal</h2>
    <p class="text-center">Te damos la bienvenida a CBTis Help, esperamos que tu estadia aqui sea agradable y sana. <br>
        Al hacer esta pagina nos enfocamos en como los alumnos podrian tener mejores accesos de apendizaje para dessarrollar sus habilidades de la forma en la que ellos mejor prefieran
    </p>
<div class="container-fluid mt-5">
  <div class="row">
    <div class="col-lg-9 col-md-8 col-12 mb-4">
      <h2 class="text-center mb-4 fw-bold text-[#56070c]">Escuelas</h2>
      <div class="row g-4">
        {% for escuela in escuelas %}
        <div class="col-12 col-md-6">
          <div class="card h-100 shadow-sm border-0 rounded-3 school-card hover:shadow-md transition-all">
            <div class="card-body">
              <h5 class="card-title text-primary fw-bold">
                <a href="{% url 'detalle' escuela.slug %}" class="stretched-link text-decoration-none hover:text-yellow-600">
                  {{ escuela.nombre }}
                </a>
              </h5>
              <h6 class="card-subtitle mb-2 text-muted">{{ escuela.plantel }}</h6>
              <ul class="list-unstyled mb-0 text-sm">
                <li><strong>Teléfono:</strong> {{ escuela.telefono }}</li>
                <li><strong>Dirección:</strong> {{ escuela.direccion }}</li>
              </ul>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12">
          <div class="alert alert-info text-center">
            No hay escuelas registradas todavía.
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="col-lg-3 col-md-4 col-12">
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
        <button 
          id="accordion-button" 
          class="w-full flex justify-between items-center p-4 bg-[#56070c] text-white font-semibold text-lg hover:bg-[#6f0a11] transition-colors"
          onclick="document.getElementById('accordion-content').classList.toggle('hidden')"
        >
          Ver Comunidades
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div id="accordion-content" class="p-4 bg-gray-50 space-y-2">
          {% for comunidad in comunidades %}
          <a href="{% url 'ver_comunidad' comunidad.slug %}"
             class="block px-4 py-2 rounded-lg text-gray-800 font-medium bg-white hover:bg-yellow-100 hover:text-[#56070c] transition-colors border border-gray-200">
             {{ comunidad.comunidad }}
          </a>
          {% empty %}
          <p class="text-gray-500 italic text-sm text-center py-3">
            No hay comunidades registradas todavía.
          </p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  // Pequeña animación de flecha
  const button = document.getElementById('accordion-button');
  const content = document.getElementById('accordion-content');
  const icon = button.querySelector('svg');

  button.addEventListener('click', () => {
    icon.classList.toggle('rotate-180');
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if bienvenido %}
<script>
Swal.fire({
  toast: true,
  position: 'top-end',
  icon: 'success',
  title: '¡Hola {{ bienvenido }}!',
  showConfirmButton: false,
  timer: 3200,
  timerProgressBar: true,
  background: '#ffffff',
  color: '#333',
  customClass: {
    popup: 'animate__animated animate__fadeInDown'
  },
  didOpen: (toast) => {
    toast.style.border = '2px solid #1d72f3';
    toast.style.boxShadow = '0 4px 15px rgba(29,114,243,0.2)';
  }
});
</script>
{% endif %}
{% if messages %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    {% for message in messages %}
        Swal.fire({
            icon: '{% if message.tags == "success" %}success{% elif message.tags == "error" %}error{% else %}info{% endif %}',
            title: '{{ message|escapejs }}',
            timer: 3000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    {% endfor %}
</script>
{% endif %}
{% endblock %}