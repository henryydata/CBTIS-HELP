<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mi sitio{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.23.0/dist/sweetalert2.min.css" integrity="sha256-RHjk4NC06Gzv9DRXsogGrVjIZOc71LxqhydWMwMDhEU=" crossorigin="anonymous">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <header class="w-full bg-[#56070c] text-white shadow-md">
    <div class="flex items-center justify-between px-6 py-3">
        <div class="flex items-center space-x-3">
        <img src="{% static 'dgeti.png' %}" alt="DGETI" class="h-10 w-auto">
        <span class="text-xl font-bold tracking-wide">CBTIS Help</span>
        </div>
        <button id="menu-btn" class="text-white focus:outline-none md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        </button>
        <nav id="menu"
        class="hidden flex-col md:flex md:flex-row md:items-center md:space-x-6 w-full md:w-auto mt-4 md:mt-0 text-center md:text-left bg-[#56070c] md:bg-transparent rounded-lg md:rounded-none p-4 md:p-0 transition-all duration-300 ease-in-out">
        {% if user.is_authenticated %}
        <a href="{% url 'perfil_usuario' user.username %}" class="block py-2 text-white hover:text-yellow-300 transition-colors">
            @{{ user.username }}
        </a>
        <div class="relative">
            <button onclick="toggleDropdown('asesorias-menu')" class="flex justify-center md:justify-start items-center w-full py-2 text-white hover:text-yellow-300 focus:outline-none">
            Asesorías
            <svg class="w-4 h-4 ml-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
            </button>
            <div id="asesorias-menu"
            class="hidden md:group-hover:block md:absolute left-1/2 md:left-0 transform -translate-x-1/2 md:translate-x-0 mt-1 bg-white text-white rounded-md shadow-lg overflow-hidden border border-[#7a1219] z-50">
            <a href="{% url 'asesorias' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Virtual</a>
            <a href="{% url 'escuelas' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Presencial</a>
            </div>
        </div>

        <!-- Dropdown Comunidades -->
        <div class="relative">
            <button onclick="toggleDropdown('comunidades-menu')" class="flex justify-center md:justify-start items-center w-full py-2 text-white hover:text-yellow-300 focus:outline-none">
            Comunidades
            <svg class="w-4 h-4 ml-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
            </button>
            <div id="comunidades-menu"
            class="hidden md:group-hover:block md:absolute left-1/2 md:left-0 transform -translate-x-1/2 md:translate-x-0 mt-1 bg-white text-white rounded-md shadow-lg overflow-hidden border border-[#7a1219] z-50">
            <a href="{% url 'comunidades' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Escolares</a>
            <a href="#" class="block px-4 py-2 hover:bg-[#8a151e]">Extracurriculares</a>
            </div>
        </div>

        {% if user.is_superuser %}
        <a href="{% url 'dashboard' %}" class="block py-2 text-white hover:text-yellow-300 transition-colors">
            dashboard
        </a>
        <div class="relative">
            <button onclick="toggleDropdown('general-menu')" class="flex justify-center md:justify-start items-center w-full py-2 text-white hover:text-yellow-300 focus:outline-none">
            General
            <svg class="w-4 h-4 ml-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
            </button>
            <div id="general-menu"
            class="hidden md:group-hover:block md:absolute left-1/2 md:left-0 transform -translate-x-1/2 md:translate-x-0 mt-1 bg-white text-white rounded-md shadow-lg overflow-y-auto max-h-64 border border-[#7a1219] z-50">
            <a href="{% url 'listar' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Escuelas</a>
            <a href="{% url 'listar_asesoria' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Asesorías</a>
            <a href="{% url 'listar_asignatura' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Asignaturas</a>
            <a href="{% url 'listar_categoria' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Categorías</a>
            <a href="{% url 'listar_especialidad' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Especialidades</a>
            </div>
        </div>
        <div class="relative">
            <button onclick="toggleDropdown('control-menu')" class="flex justify-center md:justify-start items-center w-full py-2 text-white hover:text-yellow-300 focus:outline-none">
            Control
            <svg class="w-4 h-4 ml-1 transition-transform" fill="none" stroke="currentColor" stroke-width="2"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
            </button>
            <div id="control-menu"
            class="hidden md:group-hover:block md:absolute left-1/2 md:left-0 transform -translate-x-1/2 md:translate-x-0 mt-1 bg-white text-white rounded-md shadow-lg overflow-y-auto max-h-64 border border-[#7a1219] z-50">
            <a href="{% url 'listar_alumno' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Alumnos</a>
            <a href="{% url 'listar_maestro' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Maestros</a>
            <a href="{% url 'listar_comunidad' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Comunidades</a>
            <a href="{% url 'listar_publicacion' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Publicaciones</a>
            <a href="{% url 'listar_logro' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Logros</a>
            <a href="{% url 'listar_sancion' %}" class="block px-4 py-2 hover:bg-[#8a151e]">Sanciones</a>
            </div>
        </div>
        {% endif %}

        <a href="{% url 'logout' %}" class="block py-2 text-white hover:text-yellow-300 transition-colors"
            onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
            Cerrar sesión
        </a>
        <form id="logout-form" method="post" action="{% url 'logout' %}" class="hidden">
            {% csrf_token %}
        </form>

        {% else %}
        <a href="{% url 'login' %}" class="block py-2 text-white hover:text-yellow-300 transition-colors">
            Iniciar sesión
        </a>
        {% endif %}
        </nav>
    </div>
    </header>
    <main>
        {% block content %}
        {% endblock %}
    </main>
    <footer class="bg-[#350a06] text-gray-300">
    <div class="max-w-7xl mx-auto px-4 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <div>
        <img src="{%static 'logofooter.svg'%}" alt="Logo DGETI" class="h-12 mb-4">
        <p class="text-sm">
            CBTIS Help es una plataforma para que estudiantes de diferentes CBTIS conecten, compartan información, y soliciten asesorías virtuales o presenciales con maestros de sus escuelas. También puedes seguir feeds de comunidades escolares y extracurriculares, como deportes y talleres.

        </p>
        </div>
        <div>
        <h3 class="text-white font-semibold mb-2">Enlaces</h3>
        <ul class="space-y-1 text-sm">
            <li><a href="/" class="hover:text-white">Inicio</a></li>
            <li><a href="/alumnos" class="hover:text-white">Alumnos</a></li>
            <li><a href="/maestros" class="hover:text-white">Maestros</a></li>
            <li><a href="/escuelas" class="hover:text-white">Escuelas</a></li>
            <li><a href="/comunidades" class="hover:text-white">Comunidades</a></li>
            <li><a href="#" class="hover:text-white">Terminos y condiciones</a></li>
        </ul>
        </div>
        <div>
        <h3 class="text-white font-semibold mb-2">Contacto</h3>
        <ul class="space-y-1 text-sm">
            <li>Teléfono: +52 417 177 2166</li>
            <li>Correo: soporte@cbtishelp.edu.mx</li>
        </ul>
        </div>
        <div>
        <h3 class="text-white font-semibold mb-2">Síguenos</h3>
        <div class="flex space-x-4">
            <a href="https://www.facebook.com/?locale=es_LA" class="hover:text-white" aria-label="Facebook">
            <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24"><i class="bi bi-facebook"></i></svg>
            </a>
            <a href="https://x.com/?lang=es" class="hover:text-white" aria-label="Twitter">
            <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24"><i class="bi bi-twitter-x"></i></svg>
            </a>
            <a href="https://www.instagram.com/#" class="hover:text-white" aria-label="Instagram">
            <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24"><i class="bi bi-instagram"></i></svg>
            </a>
        </div>
        </div>
    </div>
    <div class="bg-[#56070c] text-gray-500 text-center text-xs py-4">
        © 2025 CBTIS Help • Todos los derechos reservados • Aviso de privacidad • Términos de uso
    </div>
    </footer>
    <script>
    document.getElementById("menu-btn").addEventListener("click", function () {
        document.getElementById("menu").classList.toggle("hidden");
    });
    function toggleDropdown(id) {
        const dropdown = document.getElementById(id);
        dropdown.classList.toggle("hidden");
        document.querySelectorAll("[id$='-menu']").forEach(el => {
        if (el.id !== id) el.classList.add("hidden");
        });
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>